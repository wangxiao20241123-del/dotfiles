# 测试计划模板

> 复制此模板到 `.sisyphus/plans/{feature-name}/test-plan.md`，将行为规格映射到具体测试。

---

# {功能名称} 测试计划

**关联行为规格：** `.sisyphus/plans/{feature-name}/behavior-spec.md`

## 测试环境

| 项目 | 说明 |
|------|------|
| 测试框架 | {如：Ginkgo + Gomega / Jest / pytest} |
| 单元测试基础设施 | {如：envtest / mock / in-memory} |
| 集成测试基础设施 | {如：envtest with real API server / testcontainers} |
| E2E 测试基础设施 | {如：Kind cluster / staging 环境} |

## Mock 策略

| 依赖 | 单元测试 | 集成测试 | E2E |
|------|---------|---------|-----|
| {依赖 1，如 K8s API} | {mock / fake / real} | {mock / fake / real} | real |
| {依赖 2，如外部 API} | {mock / fake / real} | {mock / fake / real} | {mock / real} |

## 单元测试

| 行为编号 | 行为描述 | 测试文件 | 测试函数名 | Mock | 断言 |
|---------|---------|---------|-----------|------|------|
| {XX}-01 | {行为简述} | `{path}_test.go` | `Test{Name}` | {mock 什么} | {断言什么} |
| {XX}-02 | {行为简述} | `{path}_test.go` | `Test{Name}` | {mock 什么} | {断言什么} |
| {XX}-10 | {错误场景} | `{path}_test.go` | `Test{Name}` | {mock 什么} | {期望错误} |

## 集成测试

| 行为编号 | 行为描述 | 测试文件 | 测试函数名 | 真实依赖 | 断言 |
|---------|---------|---------|-----------|---------|------|
| {XX}-01 | {行为简述} | `{path}_test.go` | `Test{Name}` | {哪些是真实的} | {断言什么} |

## E2E 测试（如需要）

| 行为编号 | 行为描述 | 测试文件 | 场景 | 断言 |
|---------|---------|---------|------|------|
| {XX}-01 | {行为简述} | `{path}_test.go` | {端到端场景描述} | {断言什么} |

## 执行顺序

按以下顺序实现测试（每个测试走 RED → GREEN → REFACTOR）：

1. `{XX}-01` — {原因：如"核心路径，先确保基本功能"}
2. `{XX}-02` — {原因}
3. `{XX}-10` — {原因：如"错误处理，确保健壮性"}
4. ...

## 统计

| 层级 | 测试数量 |
|------|---------|
| 单元测试 | N |
| 集成测试 | N |
| E2E 测试 | N |
| **总计** | **N** |

> 总计应等于行为规格中的行为总数。如果不等，说明有遗漏或冗余。
